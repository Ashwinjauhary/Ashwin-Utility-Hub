<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' data:; font-src 'self' data: https://fonts.gstatic.com; connect-src 'self';">
    <title>Timer & Stopwatch - Ashwin Utility Hub</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚è±Ô∏è</text></svg>">
    <link rel="stylesheet" href="../css/global.css">

    <style>
        body {
            padding-top: 80px;
            min-height: 100vh;
        }

        .timer-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
        }

        .tab-btn {
            padding: 1rem 3rem;
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            border-radius: var(--radius-full);
            color: var(--text-primary);
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-secondary) 100%);
            color: white;
            border-color: var(--accent);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .tab-btn:hover:not(.active) {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Circular Timer */
        .circular-timer {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 0 auto 3rem;
        }

        .circle-svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .circle-bg {
            fill: none;
            stroke: var(--glass-border);
            stroke-width: 12;
        }

        .circle-progress {
            fill: none;
            stroke: url(#gradient);
            stroke-width: 12;
            stroke-linecap: round;
            stroke-dasharray: 1256;
            stroke-dashoffset: 1256;
            transition: stroke-dashoffset 1s linear;
        }

        .timer-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .timer-digits {
            font-size: 4rem;
            font-weight: 700;
            font-family: var(--font-display);
            color: var(--text-primary);
            letter-spacing: 0.1em;
        }

        .timer-label {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* Timer Controls */
        .timer-inputs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .time-input-group {
            text-align: center;
        }

        .time-input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .time-input {
            width: 100px;
            padding: 1rem;
            font-size: 2rem;
            text-align: center;
            border: 2px solid var(--glass-border);
            border-radius: var(--radius-md);
            background: var(--glass-bg);
            color: var(--text-primary);
            font-weight: 700;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .time-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 1.2rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-start {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .btn-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(72, 187, 120, 0.4);
        }

        .btn-pause {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            color: white;
        }

        .btn-pause:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(237, 137, 54, 0.4);
        }

        .btn-reset {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
        }

        .btn-reset:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(245, 101, 101, 0.4);
        }

        /* Stopwatch Specific */
        .stopwatch-display {
            font-size: 5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 3rem;
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            text-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .digit {
            display: inline-block;
            min-width: 1.2ch;
            animation: flipIn 0.3s ease;
        }

        @keyframes flipIn {
            from {
                transform: rotateX(-90deg);
                opacity: 0;
            }

            to {
                transform: rotateX(0);
                opacity: 1;
            }
        }

        /* Lap Times */
        .lap-container {
            max-width: 600px;
            margin: 2rem auto 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .lap-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem 1.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            margin-bottom: 0.5rem;
            backdrop-filter: blur(10px);
            animation: slideInLeft 0.3s ease;
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .lap-number {
            font-weight: 700;
            color: var(--accent);
        }

        .lap-time {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Keyboard Shortcuts Info */
        .shortcuts-info {
            text-align: center;
            margin-top: 3rem;
            padding: 1.5rem;
            background: var(--glass-bg);
            border-radius: var(--radius-lg);
            backdrop-filter: blur(10px);
        }

        .shortcuts-info h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .shortcut-item {
            display: inline-block;
            margin: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--card-bg);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
        }

        .key {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--accent);
            color: white;
            border-radius: var(--radius-sm);
            font-weight: 600;
            margin: 0 0.25rem;
        }
    </style>
</head>

<body>
    <div id="particles-js"></div>

    <nav class="navbar">
        <div class="navbar-container">
            <a href="../index.html" class="navbar-logo">‚ö° Ashwin Hub</a>
            <div class="navbar-actions">
                <a href="../index.html" class="btn btn-secondary">‚Üê Home</a>
                <button id="theme-toggle" class="btn btn-secondary">‚òÄÔ∏è</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="timer-container">
            <h1 class="text-center" style="margin-bottom: 2rem;">‚è±Ô∏è Timer & Stopwatch</h1>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('timer')">‚è≤Ô∏è Timer</button>
                <button class="tab-btn" onclick="switchTab('stopwatch')">‚è±Ô∏è Stopwatch</button>
            </div>

            <!-- Timer Tab -->
            <div id="timer-tab" class="tab-content active">
                <div class="circular-timer">
                    <svg class="circle-svg" viewBox="0 0 400 400">
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle class="circle-bg" cx="200" cy="200" r="190"></circle>
                        <circle id="circle-progress" class="circle-progress" cx="200" cy="200" r="190"></circle>
                    </svg>
                    <div class="timer-display">
                        <div class="timer-digits" id="timer-display">00:00:00</div>
                        <div class="timer-label">Hours : Minutes : Seconds</div>
                    </div>
                </div>

                <div class="timer-inputs">
                    <div class="time-input-group">
                        <label>Hours</label>
                        <input type="number" id="hours-input" class="time-input" min="0" max="23" value="0">
                    </div>
                    <div class="time-input-group">
                        <label>Minutes</label>
                        <input type="number" id="minutes-input" class="time-input" min="0" max="59" value="0">
                    </div>
                    <div class="time-input-group">
                        <label>Seconds</label>
                        <input type="number" id="seconds-input" class="time-input" min="0" max="59" value="30">
                    </div>
                </div>

                <div class="control-buttons">
                    <button id="timer-start" class="control-btn btn-start" onclick="startTimer()">‚ñ∂ Start</button>
                    <button id="timer-pause" class="control-btn btn-pause" onclick="pauseTimer()"
                        style="display:none;">‚è∏ Pause</button>
                    <button id="timer-reset" class="control-btn btn-reset" onclick="resetTimer()">üîÑ Reset</button>
                </div>
            </div>

            <!-- Stopwatch Tab -->
            <div id="stopwatch-tab" class="tab-content">
                <div class="stopwatch-display" id="stopwatch-display">
                    <span class="digit">0</span><span class="digit">0</span>
                    <span>:</span>
                    <span class="digit">0</span><span class="digit">0</span>
                    <span>:</span>
                    <span class="digit">0</span><span class="digit">0</span>
                    <span>.</span>
                    <span class="digit">0</span><span class="digit">0</span>
                </div>

                <div class="control-buttons">
                    <button id="stopwatch-start" class="control-btn btn-start" onclick="startStopwatch()">‚ñ∂
                        Start</button>
                    <button id="stopwatch-pause" class="control-btn btn-pause" onclick="pauseStopwatch()"
                        style="display:none;">‚è∏ Pause</button>
                    <button class="control-btn"
                        style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%); color: white;"
                        onclick="recordLap()">üìç Lap</button>
                    <button class="control-btn btn-reset" onclick="resetStopwatch()">üîÑ Reset</button>
                </div>

                <div class="lap-container" id="lap-container"></div>
            </div>

            <!-- Shortcuts Info -->
            <div class="shortcuts-info">
                <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
                <div class="shortcut-item">
                    <span class="key">Space</span> Start / Pause
                </div>
                <div class="shortcut-item">
                    <span class="key">R</span> Reset
                </div>
                <div class="shortcut-item">
                    <span class="key">L</span> Lap (Stopwatch)
                </div>
            </div>
        </div>
    </div>

    <!-- Audio for Timer Alarm -->
    <audio id="timer-alarm"
        src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwJM4nU8taJOQggbb7v5KlQDhFbo+Psv2QdCT6V2/DJeCgIM4PK8N2RQAoaaLrv56dPDBRbqOPyvmgdCj6W2/DKeisFNILN8t2RQAoab7zt5KdPDBNcpuPrtWcqBjiZ2vHOeisFNYLO8teJOggfa7rt5adPDBNcpePstGgqCDiZ2vHOeisFNYLN8taJOQgga7rt5adPDBNcpePstGgqCDiX2vHPeyoGNYHO8teMOwkgbLvt5q5SDxVeqOPrvGwqBjqX2/LQfS0HNoHS8tiMPQkcbbzt5q5SDxVeqOTrwW4tCDub2/PUfy0HN4LT8tmMPQkcbbzt5q5SDhNdp+PsvnAtCDqb2/PUgC0HN4LT8tmMPAkcbbzs5q5SDhJdp+PsvnAtCDqb2/PUgC0HN4HT8tmMOggcbr3t5q1RDhJdp+TsvnEuCTub3PPUgC4IN4HU8tmMOggcbr3t5q1RDhJdp+TsvnEuCTub3PPVgS8KOoHV8trNPAkdb73u5q1SDhJdpuPsvnEuCTua3PPVgS8KOoHV8trNPAkebr3u5q1SDhJdpuPrvnEuCTua3PLVgS8KOYHV8trNPAkebr3u5q1SDhJdpuXrvnEuCTub3PPVgS8KOoHV8tvNPAkebr3u5rBSDhNdpuXrvnEuCTub3PPVgS8KOoHV8tvNPAkebr3u5rBSDhNdpuXrvnEuCTub3PPVgS8KOoHV8tvNPAkebr3u5rBSDhNdpuXrvnEuCTub3PPVgS8KOoHV8tvNPAkebr3u5rBSDhNdpuXrvnEuCTub3PPVgS8KOoHV8tvNPAkebr3u5rBSDhNdpuXrvnEuCTub3PPVgS8KOoHV8tvNPAkebr3u5rBSDhNdpuXrvnEuCjib3PPVgS8KOoHV8tvNPAkebr3u5rBSDhNdpuXrvnEuCjib3PPVgS8KOoHV8tvNPAoebr3u5q9SDhNdpuXrvnEuCjib3PPVgS8KOoHV8tvNOggdbr3u5q9SDhNdpuTrvnEuCjib3PPUgS8KOYHV8trNOggdb73u5q9SDhNdpOTqvnEuCjib3PPUgS8KOYHU8trNOggdb73u5q9SDhNdpOTqvnEuCjib3PPUgS8KOYHU8trNOggdb73u5q9SDhNdpOTqvnEuCjib3PPUgS8KOYHU8trNOggdb73u5q9SDhNdpOTqvnEuCjib3PPUgC4IOYHU8trNOggdb73u5q9SDhNdpOTqvnEuCjib3PPUgC4IOYHU8trNOggdb73u5q9SDhNdpOTqvnEuCjib3PPUgC4IOYHU8trMOQgdb73u5q9SDhNdpOTqvXEuCjib3PPUgC4IOYHU8trMOQgdb73u5q9SDhNdpOTqvXEuCjib3PPUgC4IOYHU8trMOQgdb73u5q9SDhNdpOTqvXEuCjib3PPUgC4IOYHU8trMOQgdb73u5q9SDhNdpOTqvXEuCjib3PPUgC4IOYHU8trMOQgdb73u5q9SDhNdpOTqvXEuCjib3PPUgC4IOYHU8trMOQgdb73u5q9SDhNdpOTqvXEuCjib3PPUgC4IOYHU8trMOQgdb73u5q9SDhNdpOTqvXEt"></audio>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="../js/global.js"></script>

    <script>
        // Tab Switching
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(tab + '-tab').classList.add('active');
        }

        // ========== TIMER ==========
        let timerInterval;
        let timerSeconds = 0;
        let timerTotalSeconds = 0;
        let timerRunning = false;

        function updateTimerDisplay() {
            const hours = Math.floor(timerSeconds / 3600);
            const minutes = Math.floor((timerSeconds % 3600) / 60);
            const seconds = timerSeconds % 60;

            document.getElementById('timer-display').textContent =
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

            // Update circle
            const circle = document.getElementById('circle-progress');
            const progress = timerTotalSeconds > 0 ? (timerSeconds / timerTotalSeconds) : 0;
            const offset = 1256 - (1256 * progress);
            circle.style.strokeDashoffset = offset;
        }

        function startTimer() {
            if (timerRunning) return;

            if (timerSeconds === 0) {
                const hours = parseInt(document.getElementById('hours-input').value) || 0;
                const minutes = parseInt(document.getElementById('minutes-input').value) || 0;
                const seconds = parseInt(document.getElementById('seconds-input').value) || 0;

                timerSeconds = hours * 3600 + minutes * 60 + seconds;
                timerTotalSeconds = timerSeconds;

                if (timerSeconds === 0) {
                    showNotification('Please set a time first', 'warning');
                    return;
                }
            }

            timerRunning = true;
            document.getElementById('timer-start').style.display = 'none';
            document.getElementById('timer-pause').style.display = 'inline-block';

            timerInterval = setInterval(() => {
                timerSeconds--;
                updateTimerDisplay();

                if (timerSeconds <= 0) {
                    pauseTimer();
                    document.getElementById('timer-alarm').play();
                    showNotification('Timer finished!', 'success');
                }
            }, 1000);
        }

        function pauseTimer() {
            timerRunning = false;
            clearInterval(timerInterval);
            document.getElementById('timer-start').style.display = 'inline-block';
            document.getElementById('timer-pause').style.display = 'none';
        }

        function resetTimer() {
            pauseTimer();
            timerSeconds = 0;
            timerTotalSeconds = 0;
            updateTimerDisplay();
            document.getElementById('hours-input').value = 0;
            document.getElementById('minutes-input').value = 0;
            document.getElementById('seconds-input').value = 30;
        }

        // ========== STOPWATCH ==========
        let stopwatchInterval;
        let stopwatchMs = 0;
        let stopwatchRunning = false;
        let lapCounter = 0;

        function updateStopwatchDisplay() {
            const hours = Math.floor(stopwatchMs / 3600000);
            const minutes = Math.floor((stopwatchMs % 3600000) / 60000);
            const seconds = Math.floor((stopwatchMs % 60000) / 1000);
            const centiseconds = Math.floor((stopwatchMs % 1000) / 10);

            const display = document.getElementById('stopwatch-display');
            display.innerHTML = `
        <span class="digit">${Math.floor(hours / 10)}</span><span class="digit">${hours % 10}</span>
        <span>:</span>
        <span class="digit">${Math.floor(minutes / 10)}</span><span class="digit">${minutes % 10}</span>
        <span>:</span>
        <span class="digit">${Math.floor(seconds / 10)}</span><span class="digit">${seconds % 10}</span>
        <span>.</span>
        <span class="digit">${Math.floor(centiseconds / 10)}</span><span class="digit">${centiseconds % 10}</span>
      `;
        }

        function startStopwatch() {
            if (stopwatchRunning) return;

            stopwatchRunning = true;
            document.getElementById('stopwatch-start').style.display = 'none';
            document.getElementById('stopwatch-pause').style.display = 'inline-block';

            stopwatchInterval = setInterval(() => {
                stopwatchMs += 10;
                updateStopwatchDisplay();
            }, 10);
        }

        function pauseStopwatch() {
            stopwatchRunning = false;
            clearInterval(stopwatchInterval);
            document.getElementById('stopwatch-start').style.display = 'inline-block';
            document.getElementById('stopwatch-pause').style.display = 'none';
        }

        function resetStopwatch() {
            pauseStopwatch();
            stopwatchMs = 0;
            lapCounter = 0;
            updateStopwatchDisplay();
            document.getElementById('lap-container').innerHTML = '';
        }

        function recordLap() {
            if (stopwatchMs === 0) return;

            lapCounter++;
            const hours = Math.floor(stopwatchMs / 3600000);
            const minutes = Math.floor((stopwatchMs % 3600000) / 60000);
            const seconds = Math.floor((stopwatchMs % 60000) / 1000);
            const centiseconds = Math.floor((stopwatchMs % 1000) / 10);

            const lapTime = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}.${String(centiseconds).padStart(2, '0')}`;

            const lapItem = document.createElement('div');
            lapItem.className = 'lap-item';
            lapItem.innerHTML = `
        <span class="lap-number">Lap ${lapCounter}</span>
        <span class="lap-time">${lapTime}</span>
      `;

            document.getElementById('lap-container').insertBefore(lapItem, document.getElementById('lap-container').firstChild);
        }

        // ========== KEYBOARD SHORTCUTS ==========
        document.addEventListener('keydown', (e) => {
            if (e.target.matches('input')) return;

            const activeTab = document.querySelector('.tab-content.active').id;

            if (e.code === 'Space') {
                e.preventDefault();
                if (activeTab === 'timer-tab') {
                    timerRunning ? pauseTimer() : startTimer();
                } else {
                    stopwatchRunning ? pauseStopwatch() : startStopwatch();
                }
            } else if (e.key.toLowerCase() === 'r') {
                if (activeTab === 'timer-tab') {
                    resetTimer();
                } else {
                    resetStopwatch();
                }
            } else if (e.key.toLowerCase() === 'l' && activeTab === 'stopwatch-tab') {
                recordLap();
            }
        });

        // Initialize
        updateTimerDisplay();
        updateStopwatchDisplay();
    </script>
</body>

</html>